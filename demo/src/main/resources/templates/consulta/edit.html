<!DOCTYPE html>
<<<<<<< HEAD
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />
    <title>Editar Consulta</title>
</head>

<body>
    <h1>Editar Consulta</h1>

    <form th:action="@{'/consultas/update/' + ${consulta.id}}" th:object="${consulta}" method="post">

        <div>
            <label>Médico:</label>
            <span th:text="${consulta.medico != null ? consulta.medico.nome : '—'}"></span>
        </div>

        <div>
            <label>Paciente:</label>
            <span th:text="${consulta.paciente != null ? consulta.paciente.nome : '—'}"></span>
        </div>

        <div>
            <label>Horário:</label>
            <span
                th:text="${consulta.horario != null ? #temporals.format(consulta.horario.dataHora, 'yyyy-MM-dd HH:mm') : '—'}"></span>
        </div>

        <div>
            <label>Observações:</label><br>
            <textarea th:field="*{observacoes}" rows="4" cols="60"></textarea>
        </div>
        <br>

        <div>
            <label>Status:</label><br>
            <select th:field="*{status}">
                <option th:value="${T(com.example.demo.model.StatusConsulta).AGENDADA}"
                    th:text="${T(com.example.demo.model.StatusConsulta).AGENDADA}"></option>
                <option th:value="${T(com.example.demo.model.StatusConsulta).CONCLUIDA}"
                    th:text="${T(com.example.demo.model.StatusConsulta).CONCLUIDA}"></option>
                <option th:value="${T(com.example.demo.model.StatusConsulta).CANCELADA}"
                    th:text="${T(com.example.demo.model.StatusConsulta).CANCELADA}"></option>
            </select>
        </div>
        <br>

        <button type="submit">Atualizar</button>
        <a href="/consultas">Voltar</a>
    </form>

=======
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editar Consulta</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <style>
        .card-header {
            background-color: #ffc107;
            color: #212529;
        }

        .readonly-field {
            background-color: #e9ecef;
            cursor: not-allowed;
        }

        .info-box {
            background-color: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <div class="container pt-5">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card shadow">
                    <div class="card-header">
                        <h2 class="mb-0">
                            <i class="fas fa-edit"></i> Editar Consulta #<span th:text="${consulta?.id ?: ''}"></span>
                        </h2>
                    </div>

                    <div class="card-body">

                        <div class="info-box">
                            <i class="fas fa-info-circle"></i>
                            <strong>Atenção:</strong> Apenas as observações podem ser editadas.
                        </div>

                        <!-- Exibir erro -->
                        <div th:if="${mensagemErro}" class="alert alert-danger alert-dismissible fade show"
                            role="alert">
                            <i class="fas fa-exclamation-circle"></i> <span th:text="${mensagemErro}"></span>
                            <button type="button" class="close" data-dismiss="alert">
                                <span>&times;</span>
                            </button>
                        </div>

                        <!-- FORM -->
                        <form th:action="@{/consultas/update/{id}(id=${consulta.id})}" th:object="${consulta}"
                            method="POST">

                            <input type="hidden" th:field="*{id}" />

                            <h4 class="mb-3 text-secondary">
                                <i class="fas fa-info"></i> Informações da Consulta
                            </h4>
                            <hr>

                            <div class="form-group row">
                                <label class="col-sm-3 font-weight-bold">Status</label>
                                <div class="col-sm-9">
                                    <span th:if="${consulta?.status?.name() == 'AGENDADA'}"
                                        class="badge badge-info p-2">
                                        <i class="fas fa-clock"></i> AGENDADA
                                    </span>
                                    <span th:if="${consulta?.status?.name() == 'CONCLUIDA'}"
                                        class="badge badge-success p-2">
                                        <i class="fas fa-check"></i> CONCLUÍDA
                                    </span>
                                    <span th:if="${consulta?.status?.name() == 'CANCELADA'}"
                                        class="badge badge-danger p-2">
                                        <i class="fas fa-times"></i> CANCELADA
                                    </span>
                                </div>
                            </div>

                            <!-- CAMPOS SOMENTE LEITURA -->

                            <div class="form-group row">
                                <label class="col-sm-3 font-weight-bold">Paciente</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control readonly-field"
                                        th:value="${consulta?.pacienteNome ?: ''}" readonly>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-sm-3 font-weight-bold">Email</label>
                                <div class="col-sm-9">
                                    <input type="email" class="form-control readonly-field"
                                        th:value="${consulta?.pacienteEmail ?: ''}" readonly>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-sm-3 font-weight-bold">Telefone</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control readonly-field"
                                        th:value="${consulta?.pacienteTelefone ?: ''}" readonly>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-sm-3 font-weight-bold">Médico</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control readonly-field"
                                        th:value="${consulta?.medico != null ? consulta.medico.nome + ' - ' + consulta.medico.especialidade : ''}"
                                        readonly>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-sm-3 font-weight-bold">Data e Hora</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control readonly-field"
                                        th:value="${consulta?.horario?.dataHora != null ? #temporals.format(consulta.horario.dataHora, 'dd/MM/yyyy HH:mm') : ''}"
                                        readonly>
                                </div>
                            </div>

                            <!-- CAMPO EDITÁVEL -->
                            <h4 class="mb-3 mt-4 text-warning">
                                <i class="fas fa-pencil-alt"></i> Campo Editável
                            </h4>
                            <hr>

                            <div class="form-group row">
                                <label for="observacoes" class="col-sm-3 font-weight-bold">Observações</label>
                                <div class="col-sm-9">
                                    <textarea id="observacoes" th:field="*{observacoes}" class="form-control" rows="5"
                                        maxlength="500" placeholder="Adicione ou edite observações"></textarea>
                                    <small class="form-text text-muted">
                                        <i class="fas fa-info-circle"></i> Máximo de 500 caracteres
                                    </small>
                                </div>
                            </div>

                            <!-- AUDITORIA -->
                            <h4 class="mb-3 mt-4 text-muted">
                                <i class="fas fa-history"></i> Informações de Registro
                            </h4>
                            <hr>

                            <div class="form-group row">
                                <label class="col-sm-3 font-weight-bold">Criado em</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control readonly-field"
                                        th:value="${consulta?.dataCriacao != null ? #temporals.format(consulta.dataCriacao, 'dd/MM/yyyy HH:mm:ss') : ''}"
                                        readonly>
                                </div>
                            </div>

                            <div class="form-group row" th:if="${consulta?.dataAtualizacao != null}">
                                <label class="col-sm-3 font-weight-bold">Última atualização</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control readonly-field"
                                        th:value="${#temporals.format(consulta.dataAtualizacao, 'dd/MM/yyyy HH:mm:ss')}"
                                        readonly>
                                </div>
                            </div>

                            <!-- BOTÕES -->
                            <div class="form-group row mt-4">
                                <div class="col-sm-12 text-center">
                                    <button type="submit" class="btn btn-warning btn-lg mr-2">
                                        <i class="fas fa-save"></i> Salvar Alterações
                                    </button>

                                    <a th:href="@{/consultas/detalhes/{id}(id=${consulta.id})}"
                                        class="btn btn-info btn-lg mr-2">
                                        <i class="fas fa-eye"></i> Ver Detalhes
                                    </a>

                                    <a href="/consultas" class="btn btn-secondary btn-lg">
                                        <i class="fas fa-arrow-left"></i> Voltar
                                    </a>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>

                <!-- AÇÕES RÁPIDAS -->
                <div class="card mt-4 border-warning">
                    <div class="card-body">
                        <h5 class="card-title text-warning">
                            <i class="fas fa-bolt"></i> Ações Rápidas
                        </h5>

                        <div class="btn-group-vertical w-100">

                            <a th:href="@{/consultas/concluir/{id}(id=${consulta.id})}" class="btn btn-success"
                                th:if="${consulta?.status?.name() == 'AGENDADA'}"
                                onclick="return confirm('Deseja marcar esta consulta como concluída?')">
                                <i class="fas fa-check-circle"></i> Marcar como Concluída
                            </a>

                            <a th:href="@{/consultas/cancelar/{id}(id=${consulta.id})}" class="btn btn-danger mt-2"
                                th:if="${consulta?.status?.name() == 'AGENDADA'}"
                                onclick="return confirm('Deseja cancelar esta consulta?')">
                                <i class="fas fa-ban"></i> Cancelar Consulta
                            </a>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
>>>>>>> e7187a3687f90b096d638ff26bf3d96cd01bb4c1
</body>

</html>