<!-- editar-consulta.html -->
<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/header :: head"></head>

<body>
    <div th:replace="fragments/header :: header"></div>

    <main class="container mt-4">
        <div class="card shadow">
            <div class="card-header bg-warning">
                <h4 class="mb-0"><i class="bi bi-pencil-square"></i> Editar Consulta</h4>
            </div>

            <div class="card-body">
                <form th:action="@{'/consultas/update/' + ${consulta.id}}" th:object="${consulta}" method="post"
                    class="needs-validation" novalidate>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Médico</label>
                            <input class="form-control" type="text"
                                th:value="${consulta.medico != null ? consulta.medico.nome : ''}" readonly />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Paciente</label>
                            <input class="form-control" type="text"
                                th:value="${consulta.paciente != null ? consulta.paciente.nome : ''}" readonly />
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Horário</label>
                        <input class="form-control" type="text"
                            th:value="${#temporals.format(consulta.horario.dataHora, 'dd/MM/yyyy HH:mm')}" readonly />
                        <small class="form-text text-muted">Para alterar horário, cancele e re-agende (regra de
                            negócio).</small>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Observações</label>
                        <textarea th:field="*{observacoes}" class="form-control" rows="4" maxlength="1000"></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Status</label>
                        <select th:field="*{status}" class="form-select" required>
                            <option th:value="${T(com.example.demo.model.StatusConsulta).AGENDADA}"
                                th:text="${T(com.example.demo.model.StatusConsulta).AGENDADA}">AGENDADA</option>
                            <option th:value="${T(com.example.demo.model.StatusConsulta).CONCLUIDA}"
                                th:text="${T(com.example.demo.model.StatusConsulta).CONCLUIDA}">CONCLUIDA</option>
                            <option th:value="${T(com.example.demo.model.StatusConsulta).CANCELADA}"
                                th:text="${T(com.example.demo.model.StatusConsulta).CANCELADA}">CANCELADA</option>
                        </select>
                    </div>

                    <div class="d-flex justify-content-end gap-2">
                        <a class="btn btn-secondary" th:href="@{/consultas}"><i class="bi bi-x"></i> Cancelar</a>
                        <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <div th:replace="fragments/footer :: footer"></div>
    <div th:replace="fragments/footer :: common-scripts"></div>
</body>

</html>