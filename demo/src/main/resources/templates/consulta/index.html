<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8" />
  <title>Consultas</title>
</head>

<body>
  <h1>Consultas</h1>

  <p th:if="${mensagemSucesso}" th:text="${mensagemSucesso}" style="color:green"></p>
  <p th:if="${mensagemErro}" th:text="${mensagemErro}" style="color:red"></p>

  <a href="/consultas/agendar">Agendar nova consulta</a>
  <table border="1" cellpadding="6" cellspacing="0">
    <thead>
      <tr>
        <th>ID</th>
        <th>Médico</th>
        <th>Paciente</th>
        <th>Horário</th>
        <th>Status</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="c : ${consultasList}">
        <td th:text="${c.id}"></td>
        <td th:text="${c.medico != null ? c.medico.nome : '—'}"></td>
        <td th:text="${c.paciente != null ? c.paciente.nome : '—'}"></td>
        <td th:text="${c.horario != null ? #temporals.format(c.horario.dataHora, 'yyyy-MM-dd HH:mm') : '—'}"></td>
        <td th:text="${c.status}"></td>
        <td>
          <a th:href="@{'/consultas/detalhes/' + ${c.id}}">Detalhes</a> |
          <a th:href="@{'/consultas/edit/' + ${c.id}}">Editar</a> |
          <a th:href="@{'/consultas/cancelar/' + ${c.id}}"
            onclick="return confirm('Confirmar cancelamento?');">Cancelar</a> |
          <a th:href="@{'/consultas/concluir/' + ${c.id}}">Concluir</a> |
          <a th:href="@{'/consultas/delete/' + ${c.id}}"
            onclick="return confirm('Deseja excluir esta consulta?');">Excluir</a>
        </td>
      </tr>
    </tbody>
  </table>

</body>

</html>